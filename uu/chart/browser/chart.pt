<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="uu.chart">
<head>

<metal:block fill-slot="javascript_head_slot">

<!--[if lte IE 9]>
  <script type="text/javascript" src="++resource++uu.chart.jqplot/excanvas.min.js"></script>
  <script type="text/javascript" src="++resource++uu.chart.js/ec5compat.js"></script>
<![endif]-->
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jquery.jqplot.min.js"></script>
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jqplot.dateAxisRenderer.min.js"></script>
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jqplot.barRenderer.min.js"></script>
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jqplot.categoryAxisRenderer.min.js"></script>
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jqplot.canvasTextRenderer.min.js"></script>
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jqplot.canvasAxisLabelRenderer.min.js"></script>
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jqplot.pointLabels.min.js"></script>
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jqplot.trendline.js"></script>
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jqplot.canvasAxisTickRenderer.min.js"></script>
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jqplot.canvasThresholdLinesRenderer.js"></script>
  <script type="text/javascript" src="" tal:attributes="src string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.js/uu.chart.js"></script>
</metal:block>
<metal:block fill-slot="style_slot">
  <link rel="stylesheet" type="text/css" href="" tal:attributes="href string:${context/@@plone_portal_state/navigation_root_url}/++resource++uu.chart.jqplot/jquery.jqplot.min.css" />
  <style>
  div.chartdiv { margin-bottom:3em; }
  div.chartdiv .jqplot-xaxis-tick { text-align:center; left:0; }
  td.jqplot-table-legend { min-width:10em; padding-left:0.5em; border-bottom:1px dotted #ccc; }
  td.jqplot-table-legend:first-child { min-width:1.5em; max-width:1.5em; padding-left:0; }
  </style>
</metal:block>
</head>

<body>
<div metal:fill-slot="main">

 <tal:block repeat="element view/chart_elements">
  <tal:block define="ischart python:context.portal_interface.objectImplements(element, 'uu.chart.interfaces.IBaseChart')">
   <div style="width:700px;"
        tal:define="uid python:view.UID(element);
                    json python:view.json_url(element);
                    chart_width python:getattr(element, 'width', None) or 600;
                    float python:(chart_width <= 260) and 'float:left' or 'clear:both'">
   <div class="chartwrap" style="" tal:attributes="style string:width:${chart_width}px;;${float}" tal:condition="ischart">
    <hr />
    <h3 tal:content="element/Title" style="width:90%">Chart title</h3>
    <p tal:condition="element/Description">
      <span class="description" tal:content="element/Description">
      </span>
    </p>
    <div class="chartdiv" id="" style="" tal:attributes="id string:chartdiv-${uid}; style python:view.divstyle(element)">
      <a style="display:none;" rel="api" type="application/json" href="" tal:attributes="href json">Data</a>
    </div>
    <tal:block condition="python:hasattr(element.info, 'output')">
      <div class="chartinfo" tal:content="structure element/info/output">CAPTION</div>
    </tal:block>
   </div>
   <div style="clear:both" tal:condition="python:not context.portal_interface.objectImplements(element, 'uu.chart.interfaces.IBaseChart')">
    <div tal:replace="structure element/CookedBody"></div>
   </div>
  </div>
  </tal:block>
 </tal:block>
 <div style="clear:both"></div>
</div>
</body>
</html>

